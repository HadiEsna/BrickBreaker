#include "import_struct.h"SDL_Window *win;SDL_Renderer *renderer;Sint16 r[3] = {0, 0, 255};Sint16 g[3] = {25, 255, 0};Sint16 b[3] = {255, 12, 12};void init() {    score = 1;    score_perv = 1;    ball_Speed = 4;    shot = 0;    srand(time(NULL));    gg.x = 250;    gg.ang = -p / 2;    int k = rand() % 3;    gg.r = r[k];    gg.g = g[k];    gg.b = b[k];    play = 1;    init_window();    can_save = 1;}void load() {    s = fopen("../s.pp", "r");    char line[1000];    int num = 0;    while (num != shomare_bazii_ke_mikhaym_load_konim) {        num++;        if (num == shomare_bazii_ke_mikhaym_load_konim) {            fscanf(s, "%d%d", &n, &score);            score_perv = score;            for (int i = 0; i < 3 * n; i++) {                for (int j = 0; j < 2 * n; j++) {                    fscanf(s, "%d", &block[i][j]);                }            }            break;        }        fgets(line, 1000, s);    }    fclose(s);}void init_window() {    SDL_Init(SDL_INIT_VIDEO);    win = SDL_CreateWindow("PARGOOl", 1000, 20, 600, 1000, SDL_WINDOW_OPENGL);    rend = SDL_CreateRenderer(win, -1, SDL_RENDERER_ACCELERATED);    int f_p = 1;    int state = 0;    n = 2;    int flag[2] = {0, 0}, new_game_from_load = 0;    s = fopen("../s.pp", "r");    char line[1000];    saved_n = 0;    while (1) {//chanta save dashtim ta alan        int num = 0;        fscanf(s, "%d", &num);        if (num) {            fgets(line, 10000, s);        } else {            break;        }        saved_n++;    }    fclose(s);    while (f_p) {        int start_ticks = SDL_GetTicks();        SDL_SetRenderDrawColor(rend, 5, 5, 5, 100);        SDL_RenderClear(rend);        stringRGBA(rend, 250, 300, "pargool", 255, 100, 255, 255);        if (state == 0) {            stringRGBA(rend, 200, 330, "choose what you want:", 100, 200, 255, 255);            stringRGBA(rend, 200, 340, "new game : press 'n'", 255, 255, 255, 255);            stringRGBA(rend, 200, 350, "load a game : press 'l'", 255, 255, 255, 255);            SDL_Event event;            if (SDL_PollEvent(&event)) {                if (event.type == SDL_QUIT) {                    play = 0;                    f_p = 0;                    break;                }                if (event.type == SDL_KEYDOWN) {                    if (event.key.keysym.sym == SDLK_n) {                        state = 1;                    }                    if (event.key.keysym.sym == SDLK_l) {                        shomare_bazii_ke_mikhaym_load_konim = 1;                        state = 2;                        if (saved_n == 0) {                            state = 1;                            new_game_from_load = 1;                        } else {                            load();                        }                    }                    if (event.key.keysym.sym == SDLK_q) {                        play = 0;                        f_p = 0;                        return;                    }                }            }        }        if (state == 1) {            if (new_game_from_load == 1)                stringRGBA(rend, 200, 310, "you didnt save a game", 250, 250, 100, 255);            stringRGBA(rend, 200, 330, "choose number of bricks in a row:", 100, 250, 250, 255);            char buff[3];            sprintf(buff, "%d", 2 * n);            stringRGBA(rend, 480, 330, buff, 255, 255, 255, 255);            stringRGBA(rend, 200, 370, "press up & down to change the number", 255, 255, 255, 100);            stringRGBA(rend, 200, 380, "press enter to start", 255, 255, 255, 100);            stringRGBA(rend, 200, 390, "press q to exit", 255, 255, 255, 100);            SDL_Event event;            while (SDL_PollEvent(&event)) {                if (event.type == SDL_QUIT) {                    play = 0;                    return;                }                if (event.type == SDL_KEYDOWN) {                    if (event.key.keysym.sym == SDLK_q) {                        play = 0;                        return;                    }                    if (event.key.keysym.sym == SDLK_UP && !flag[1]) {                        n++;                        flag[1] = 1;                    }                    if (event.key.keysym.sym == SDLK_DOWN && !flag[0]) {                        n--;                        flag[0] = 1;                    }                    if (event.key.keysym.sym == SDLK_RETURN) {                        for (int i = 0; i < 3 * n; i++) {                            for (int j = 0; j < 2 * n; j++) {                                block[i][j] = 0;                            }                        }                        pull_down();                        return;                    }                    if (n > 10)                        n--;                    if (n < 2)                        n++;                }                if (event.type == SDL_KEYUP) {                    if (event.key.keysym.sym == SDLK_DOWN)                        flag[0] = 0;                    if (event.key.keysym.sym == SDLK_UP)                        flag[1] = 0;                }            }        }        if (state == 2) {            stringRGBA(rend, 200, 330, "choose the saved game that you want:", 100, 250, 250, 255);            char buff[5];            sprintf(buff, "%d", shomare_bazii_ke_mikhaym_load_konim);            stringRGBA(rend, 530, 330, buff, 255, 255, 255, 255);            stringRGBA(rend, 200, 370, "press up & down to change the number", 255, 255, 255, 100);            stringRGBA(rend, 200, 380, "press enter to start", 255, 255, 255, 100);            stringRGBA(rend, 200, 390, "press q to exit", 255, 255, 255, 100);            SDL_Event event;            while (SDL_PollEvent(&event)) {                if (event.type == SDL_QUIT) {                    play = 0;                    return;                }                if (event.type == SDL_KEYDOWN) {                    if (event.key.keysym.sym == SDLK_q) {                        play = 0;                        score = 0;                        return;                    }                    if (event.key.keysym.sym == SDLK_UP && !flag[1]) {                        shomare_bazii_ke_mikhaym_load_konim++;                        load();                        flag[1] = 1;                    }                    if (event.key.keysym.sym == SDLK_DOWN && !flag[0]) {                        shomare_bazii_ke_mikhaym_load_konim--;                        load();                        flag[0] = 1;                    }                    if (event.key.keysym.sym == SDLK_RETURN) {                        return;                    }                    if (shomare_bazii_ke_mikhaym_load_konim > saved_n)                        shomare_bazii_ke_mikhaym_load_konim--;                    if (shomare_bazii_ke_mikhaym_load_konim <= 0)                        shomare_bazii_ke_mikhaym_load_konim++;                }                if (event.type == SDL_KEYUP) {                    if (event.key.keysym.sym == SDLK_DOWN)                        flag[0] = 0;                    if (event.key.keysym.sym == SDLK_UP)                        flag[1] = 0;                }            }            draw_screen();            draw_block();        }        SDL_RenderPresent(rend);        while (SDL_GetTicks() - start_ticks < 1000 / FPS);    }}void save() {    s = fopen("../s.pp", "a");    fprintf(s, "%d %d ", n, score);    for (int i = 0; i < 3 * n; i++) {        for (int j = 0; j < 2 * n; j++) {            fprintf(s, "%d ", block[i][j]);        }    }    fprintf(s, "\n");    saved_n++;}